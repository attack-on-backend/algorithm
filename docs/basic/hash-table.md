# Attack on Algorithm - å“ˆå¸Œè¡¨ ğŸ 

## å®šä¹‰

**å“ˆå¸Œè¡¨ :** ä¹Ÿå«åšæ•£åˆ—è¡¨ , æ˜¯æ ¹æ®å…³é”®ç å€¼ (`key - value`)ç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ , å“ˆå¸Œè¡¨é€šè¿‡é”® `key`å’Œæ˜ å°„å‡½æ•°`Hash(key)`è®¡ç®—å‡ºå¯¹åº”çš„å€¼ `value` , æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½• , ä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ , è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšå“ˆå¸Œå‡½æ•° (æ•£åˆ—å‡½æ•°) , å­˜æ”¾è®°å½•çš„æ•°ç»„å«åšå“ˆå¸Œè¡¨ (æ•£åˆ—è¡¨) 

å“ˆå¸Œè¡¨çš„å…³é”®æ€æƒ³æ˜¯ä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°å­˜å‚¨æ¡¶ : 

- å½“æˆ‘ä»¬æ’å…¥ä¸€ä¸ªæ–°çš„é”®æ—¶ , å“ˆå¸Œå‡½æ•°å°†å†³å®šè¯¥é”®åº”è¯¥åˆ†é…åˆ°å“ªä¸ªæ¡¶ä¸­ , å¹¶å°†è¯¥é”®å­˜å‚¨åœ¨ç›¸åº”çš„æ¡¶ä¸­
- å½“æˆ‘ä»¬æƒ³è¦æœç´¢ä¸€ä¸ªé”®æ—¶ , å“ˆå¸Œè¡¨å°†ä½¿ç”¨ç›¸åŒçš„å“ˆå¸Œå‡½æ•°æ¥æŸ¥æ‰¾å¯¹åº”çš„æ¡¶ , å¹¶åªåœ¨ç‰¹å®šçš„æ¡¶ä¸­è¿›è¡Œæœç´¢

![hash-01](https://github.com/attack-on-backend/algorithm/blob/master/assert/hash-01.png?raw=true)

## å®ç°

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ç°

```python
class HashTable:
    def __init__(self, size=10):
        # åˆå§‹åŒ–å“ˆå¸Œè¡¨çš„å¤§å°å’Œå†…éƒ¨å­˜å‚¨ç»“æ„
        self.size = size
        self.table = [[] for _ in range(self.size)]

    def _hash(self, key):
        # è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°è¡¨ä¸­çš„ä¸€ä¸ªç´¢å¼•
        return hash(key) % self.size

    def insert(self, key, value):
        # è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œå¾—åˆ°å­˜å‚¨ä½ç½®çš„ç´¢å¼•
        index = self._hash(key)
        # æ£€æŸ¥è¯¥ä½ç½®æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒçš„é”®ï¼Œå¦‚æœå­˜åœ¨åˆ™æ›´æ–°å€¼
        for pair in self.table[index]:
            if pair[0] == key:
                pair[1] = value
                return
        # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™å°†æ–°çš„é”®å€¼å¯¹æ·»åŠ åˆ°è¯¥ä½ç½®
        self.table[index].append([key, value])

    def find(self, key):
        # è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œå¾—åˆ°å­˜å‚¨ä½ç½®çš„ç´¢å¼•
        index = self._hash(key)
        # éå†è¯¥ä½ç½®çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾é”®å¯¹åº”çš„å€¼
        for pair in self.table[index]:
            if pair[0] == key:
                return pair[1]
        return None  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å› None

    def delete(self, key):
        # è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œå¾—åˆ°å­˜å‚¨ä½ç½®çš„ç´¢å¼•
        index = self._hash(key)
        # éå†è¯¥ä½ç½®çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾å¹¶åˆ é™¤é”®å€¼å¯¹
        for i, pair in enumerate(self.table[index]):
            if pair[0] == key:
                del self.table[index][i]
                return True
        return False  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å› False

    def __str__(self):
        # è¿”å›å“ˆå¸Œè¡¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œæ–¹ä¾¿è°ƒè¯•å’ŒæŸ¥çœ‹
        return str(self.table)

if __name__ == '__main__':
    
    # ç¤ºä¾‹ç”¨æ³•
    hash_table = HashTable()
    hash_table.insert("apple", 1)
    hash_table.insert("banana", 2)
    hash_table.insert("orange", 3)
    
    print(hash_table)  # è¾“å‡º: [[], [], [], [], [], [], [['orange', 3]], [], [], [['banana', 2], ['apple', 1]]]
    print(hash_table.find("apple"))  # è¾“å‡º: 1
    print(hash_table.find("grape"))  # è¾“å‡º: None
    
    hash_table.delete("banana")
    print(hash_table)  # è¾“å‡º: [[], [], [], [], [], [], [['orange', 3]], [], [], [['apple', 1]]]
```

## å“ˆå¸Œå‡½æ•°

å“ˆå¸Œå‡½æ•°ä¸€èˆ¬ä¼šæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ : 

- å“ˆå¸Œå‡½æ•°åº”è¯¥æ˜“äºè®¡ç®— , å¹¶ä¸”å°½é‡ä½¿è®¡ç®—å‡ºæ¥çš„ç´¢å¼•å€¼å‡åŒ€åˆ†å¸ƒ
- å“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„è¾“å‡ºå€¼
- å¦‚æœ $Hash(key1)â‰ Hash(key2)$ , é‚£ä¹ˆ key1ã€key2 ä¸€å®šä¸ç›¸ç­‰
- å¦‚æœ $Hash(key1)==Hash(key2)$ , é‚£ä¹ˆ key1ã€key2 å¯èƒ½ç›¸ç­‰ , ä¹Ÿå¯èƒ½ä¸ç›¸ç­‰ (ä¼šå‘ç”Ÿå“ˆå¸Œç¢°æ’)

å¸¸è§çš„å“ˆå¸Œç®—æ³• : 

- [MD5](https://en.wikipedia.org/wiki/MD5)
- [SHA-1](https://en.wikipedia.org/wiki/SHA-1)
- [SHA-2](https://en.wikipedia.org/wiki/SHA-2)
- [NTLM](https://it.wikipedia.org/wiki/NTLM)

## å“ˆå¸Œå†²çª

**å“ˆå¸Œå†²çª :** ä¸åŒçš„å…³é”®å­—é€šè¿‡åŒä¸€ä¸ªå“ˆå¸Œå‡½æ•°å¯èƒ½å¾—åˆ°åŒä¸€å“ˆå¸Œåœ°å€ , å³ $key1â‰ key2$ , è€Œ $Hash(key1)==Hash(key2)$ , è¿™ç§ç°è±¡ç§°ä¸ºå“ˆå¸Œå†²çª

è§£å†³å“ˆå¸Œå†²çªæœ‰ä¸¤ç§æ–¹æ³• : *å¼€æ”¾åœ°å€æ³• (Open Addressing) , é“¾åœ°å€æ³• (Separate Chaining)*

### å¼€å‘åœ°å€æ³•

å½“å‘ç”Ÿå†²çªæ—¶ , å¼€æ”¾åœ°å€æ³•æŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•æ±‚å¾—åç»§å“ˆå¸Œåœ°å€ : $H(i)=(Hash(key)+F(i)) modâ€‰m$ , $i=1,2,3,...,n(nâ‰¤mâˆ’1)$

- $H(i)$æ˜¯åœ¨å¤„ç†å†²çªä¸­å¾—åˆ°çš„åœ°å€åºåˆ— , å³åœ¨ç¬¬ 1 æ¬¡å†²çª ($i=1$) æ—¶ç»è¿‡å¤„ç†å¾—åˆ°ä¸€ä¸ªæ–°åœ°å€ $H(1)$ , å¦‚æœåœ¨ $H(1)$ å¤„ä»ç„¶å‘ç”Ÿå†²çª ($i=2$) æ—¶ç»è¿‡å¤„ç†æ—¶å¾—åˆ°å¦ä¸€ä¸ªæ–°åœ°å€ $H(2)$â€¦â€¦ å¦‚æ­¤ä¸‹å» , ç›´åˆ°æ±‚å¾—çš„ $H(n)$ ä¸å†å‘ç”Ÿå†²çª
- $Hash(key)$æ˜¯å“ˆå¸Œå‡½æ•° , $m$ æ˜¯å“ˆå¸Œè¡¨è¡¨é•¿ , å¯¹å“ˆå¸Œè¡¨é•¿å–ä½™çš„ç›®çš„æ˜¯ä¸ºäº†ä½¿å¾—åˆ°çš„ä¸‹ä¸€ä¸ªåœ°å€ä¸€å®šè½åœ¨å“ˆå¸Œè¡¨ä¸­
- $F(i)$ æ˜¯å†²çªè§£å†³æ–¹æ³• , å–æ³•å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§ : 
  - çº¿æ€§æ¢æµ‹æ³• : $F(i)=1,2,3,...,mâˆ’1$
  - äºŒæ¬¡æ¢æµ‹æ³• : $F(i)=1^2,âˆ’1^2,2^2,âˆ’2^2,...,Â±n^2(nâ‰¤m/2)$
  - ä¼ªéšæœºæ•°åºåˆ— : $F(i)=ä¼ªéšæœºæ•°åºåˆ—$

![hash-02](https://github.com/attack-on-backend/algorithm/blob/master/assert/hash-02.png?raw=true)

### é“¾åœ°å€æ³•

**é“¾åœ°å€æ³• :** å°†å…·æœ‰ç›¸åŒå“ˆå¸Œåœ°å€çš„å…ƒç´  (æˆ–è®°å½•) å­˜å‚¨åœ¨åŒä¸€ä¸ªçº¿æ€§é“¾è¡¨ä¸­

é“¾åœ°å€æ³•æ˜¯ä¸€ç§æ›´åŠ å¸¸ç”¨çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³• , ç›¸æ¯”äºå¼€æ”¾åœ°å€æ³• , é“¾åœ°å€æ³•æ›´åŠ ç®€å•

æˆ‘ä»¬å‡è®¾å“ˆå¸Œå‡½æ•°äº§ç”Ÿçš„å“ˆå¸Œåœ°å€åŒºé—´ä¸º` [0, mâˆ’1]` , å“ˆå¸Œè¡¨çš„è¡¨é•¿ä¸º $m$ , åˆ™å¯ä»¥å°†å“ˆå¸Œè¡¨å®šä¹‰ä¸ºä¸€ä¸ªæœ‰ $m$ ä¸ªå¤´èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æŒ‡é’ˆæ•°ç»„ $T$

- è¿™æ ·åœ¨æ’å…¥å…³é”®å­—çš„æ—¶å€™ , æˆ‘ä»¬åªéœ€è¦é€šè¿‡å“ˆå¸Œå‡½æ•° $Hash(key)$ è®¡ç®—å‡ºå¯¹åº”çš„å“ˆå¸Œåœ°å€ $i$  , ç„¶åå°†å…¶ä»¥é“¾è¡¨èŠ‚ç‚¹çš„å½¢å¼æ’å…¥åˆ°ä»¥ $T[i]$ ä¸ºå¤´èŠ‚ç‚¹çš„å•é“¾è¡¨ä¸­ , åœ¨é“¾è¡¨ä¸­æ’å…¥ä½ç½®å¯ä»¥åœ¨è¡¨å¤´æˆ–è¡¨å°¾ , ä¹Ÿå¯ä»¥åœ¨ä¸­é—´ , å¦‚æœæ¯æ¬¡æ’å…¥ä½ç½®ä¸ºè¡¨å¤´ , åˆ™æ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$
- è€Œåœ¨åœ¨æŸ¥è¯¢å…³é”®å­—çš„æ—¶å€™ , æˆ‘ä»¬åªéœ€è¦é€šè¿‡å“ˆå¸Œå‡½æ•° $Hash(key)$ è®¡ç®—å‡ºå¯¹åº”çš„å“ˆå¸Œåœ°å€ $i$  , ç„¶åå°†å¯¹åº”ä½ç½®ä¸Šçš„é“¾è¡¨æ•´ä¸ªæ‰«æä¸€é , æ¯”è¾ƒé“¾è¡¨ä¸­æ¯ä¸ªé“¾èŠ‚ç‚¹çš„é”®å€¼ä¸æŸ¥è¯¢çš„é”®å€¼æ˜¯å¦ä¸€è‡´ , æŸ¥è¯¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦è·Ÿé“¾è¡¨çš„é•¿åº¦ $k$ æˆæ­£æ¯” , ä¹Ÿå°±æ˜¯ $O(k)$ å¯¹äºå“ˆå¸Œåœ°å€æ¯”è¾ƒå‡åŒ€çš„å“ˆå¸Œå‡½æ•°æ¥è¯´ , ç†è®ºä¸Šè®² , $k=n//m$ , å…¶ä¸­ $n$ ä¸ºå…³é”®å­—çš„ä¸ªæ•° , $m$ ä¸ºå“ˆå¸Œè¡¨çš„è¡¨é•¿

![hash-03](https://github.com/attack-on-backend/algorithm/blob/master/assert/hash-03.png?raw=true)

## ä¾‹é¢˜

- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode.cn/problems/two-sum/)
- [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)
- [12. æ•´æ•°è½¬ç½—é©¬æ•°å­—](https://leetcode.cn/problems/integer-to-roman/)



